---
# File automatically generated by Engraver.
# DO NOT MODIFY.

- hosts: localhost
  remote_user: "{{ remote_user }}"
  become_method: sudo
  vars_files:
    - "group_vars/{{ onyx_cluster_id }}.yml"
  vars:
    - create_vpc: yes
  roles:
    - aws

% for p in profiles:
- hosts: localhost
  remote_user: "{{ remote_user }}"
  become_method: sudo
  vars_files:
    - "group_vars/{{ onyx_cluster_id }}.yml"
    - "vars/cluster_vars/{{ onyx_cluster_id }}/machine_profiles/${ p }_profile.yml"
  vars:
    - create_ec2: yes
  roles:
    - aws

% endfor
- hosts: localhost
  remote_user: "{{ remote_user }}"
  become_method: sudo
  vars_files:
    - "group_vars/{{ onyx_cluster_id }}.yml"
  vars:
    - cache: yes
  roles:
    - aws

% for s, ps in services.iteritems():
- hosts: ${ s }
  remote_user: "{{ remote_user }}"
  become_method: sudo
  vars_files:
    - "group_vars/{{ onyx_cluster_id }}.yml"
% for p in ps:
    - "vars/cluster_vars/{{ onyx_cluster_id }}/machine_profiles/${ p }_profile.yml"
% endfor
  roles:
    - ${ s }

% endfor